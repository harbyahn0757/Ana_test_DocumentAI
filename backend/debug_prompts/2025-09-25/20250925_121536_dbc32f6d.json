{
  "entry_id": "20250925_121536_dbc32f6d",
  "timestamp": "2025-09-25T12:15:36.274381",
  "service_name": "테이블구조분석기",
  "prompt_type": "header_analysis",
  "system_prompt": "당신은 의료 검진 보고서의 테이블 헤더를 분석하는 전문가입니다. 다양한 형태의 테이블 구조(가로/세로/혼합 헤더)를 정확히 식별할 수 있습니다.",
  "user_prompt": "의료 검진 보고서 테이블의 구조와 헤더를 종합적으로 분석해주세요.\n\n## 전체 테이블 구조 (행번호: [열0, 열1, 열2, ...]):\n평가구분\t업 무 수 행 적 합 여 부 평 가 기 준\n가\t건강관리상 현재의 조건 하에서 작업이 가능한 경우\n나\t일정한 조건(환경개선, 보호구착용, 건강진단의 주기를 앞당기는 경우 등)하에서 현재의 작업이 가능한 경우\n다\t건강장해가 우려되어 한시적으로 현재의 작업을 할 수 없는 경우 (건강상 또는 근로조건 상의 문제가 해결된 후 작업복귀 가능)\n라\t건강장해의 악화 혹은 영구적인 장해의 발생이 우려되어 현재의 작업을 해서는 안 되는 경우\n\n## 테이블 구조 분석 요구사항:\n1. **헤더 방향 판단**: 가로(top), 세로(left), 혼합(both), 복합(mixed)\n2. **테이블 레이아웃**: horizontal(가로 중심), vertical(세로 중심), mixed(혼합)\n3. **각 셀의 역할**: 헤더인지 데이터인지 구분\n\n## 다양한 테이블 형태 예시:\n- **가로 헤더**: 첫 번째 행이 헤더 (검사항목, 결과, 정상치, 판정)\n- **세로 헤더**: 첫 번째 열이 헤더 (신장, 체중, 혈압 등)\n- **혼합 헤더**: 첫 행과 첫 열 모두 헤더\n- **복합 구조**: 계층적 헤더, 병합된 셀 등\n\n## 필드 타입 분류:\n- result: 검사결과, 측정값, 수치, 값\n- normal_range: 정상치, 기준치, 정상범위, 참고치, 기준값  \n- judgment: 판정, 소견, 결과, 평가, 상태\n- opinion: 소견, 의견, 비고, 특이사항, 코멘트\n- previous_year: 전년도, 작년, 이전, 과거, 전년\n- two_years_ago: 전전년도, 재작년, 2년전\n- unit: 단위, unit\n- reference: 참조, 참고, 기준\n- key_name: 검사항목명, 키 이름\n\n## 응답 형식 (JSON):\n{\n    \"table_structure\": \"horizontal|vertical|mixed\",\n    \"header_orientation\": \"top|left|both|mixed\",\n    \"column_mappings\": {\n        \"0\": \"key_name\",\n        \"1\": \"result\", \n        \"2\": \"normal_range\",\n        \"3\": \"judgment\"\n    },\n    \"row_mappings\": {\n        \"0\": \"header\",\n        \"1\": \"data_row_1\"\n    },\n    \"confidence\": 0.95,\n    \"reasoning\": \"테이블 구조 분석 근거\",\n    \"table_analysis\": \"이 테이블은 가로형 구조로 첫 번째 행이 헤더입니다...\",\n    \"detected_fields\": [\"result\", \"normal_range\", \"judgment\"]\n}\n\n## 중요 분석 규칙:\n1. 테이블 전체 구조를 먼저 파악 (가로/세로/혼합)\n2. 헤더의 위치와 방향을 정확히 식별\n3. 각 셀이 헤더인지 데이터인지 구분\n4. 의료 검진 보고서의 일반적인 패턴 고려\n5. 불명확한 경우 confidence를 낮게 설정\n6. table_analysis에 구조 분석 과정 상세 설명",
  "model_settings": {
    "temperature": 0.1,
    "max_tokens": 1000
  },
  "response": null,
  "execution_time": 5.590758800506592,
  "success": false,
  "error_message": "AI 응답 실패"
}